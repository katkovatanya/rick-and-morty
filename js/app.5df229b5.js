(function(){"use strict";var e={6024:function(e,a,t){var r=t(5130),s=t(4302);function n(e,a,t,r,n,o){const i=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(i)])}var o={},i=t(1786);const d=(0,i.A)(o,[["render",n]]);var c=d,u=t(4232);const l=["v-model"],p=(0,s.Lk)("option",{disabled:"",value:""},"Фильтрация",-1),v=["value"];function g(e,a,t,r,n,o){return(0,s.uX)(),(0,s.CE)("select",{class:"select","v-model":t.modelValue,onChange:a[0]||(a[0]=(...e)=>o.cangeOption&&o.cangeOption(...e))},[p,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.options,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,u.v_)(e.name),9,v)))),128))],40,l)}var h={name:"my-select",props:{modelValue:{type:String},options:{type:Array,default:()=>[]}},methods:{cangeOption(e){this.$emit("update:modelValue",e.target.value)}}};const f=(0,i.A)(h,[["render",g]]);var m=f;const _=["value"];function y(e,a,t,r,n,o){return(0,s.uX)(),(0,s.CE)("input",{value:t.modelValue,onInput:a[0]||(a[0]=(...e)=>o.updateInput&&o.updateInput(...e)),class:"input",type:"text"},null,40,_)}var k={name:"my-input",props:{modelValue:[String,Number]},methods:{updateInput(e){this.$emit("update:modelValue",e.target.value)}}};const b=(0,i.A)(k,[["render",y],["__scopeId","data-v-97baff56"]]);var C=b;const L={class:"btn"};function E(e,a,t,r,n,o){return(0,s.uX)(),(0,s.CE)("button",L,[(0,s.RG)(e.$slots,"default")])}var X={name:"my-button"};const A=(0,i.A)(X,[["render",E]]);var P=A;const M={class:"spinner"};function I(e,a,t,r,n,o){return(0,s.uX)(),(0,s.CE)("div",M)}var O={name:"my-loader"};const w=(0,i.A)(O,[["render",I],["__scopeId","data-v-bb0bdcf8"]]);var F=w,j=[m,C,P,F],Q=t(1387);const V={class:"search"},W={key:0,class:"error-message"},x={class:"error-text"};function $(e,a,t,n,o,i){const d=(0,s.g2)("app-banner"),c=(0,s.g2)("my-input"),l=(0,s.g2)("my-button"),p=(0,s.g2)("my-select"),v=(0,s.g2)("card-list"),g=(0,s.g2)("my-loader"),h=(0,s.g2)("app-pagination");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(d),(0,s.Lk)("div",V,[(0,s.bF)(c,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Поиск по имени...",onKeyup:(0,r.jR)(i.fetchCards,["enter"])},null,8,["modelValue","onKeyup"]),(0,s.bF)(l,{onClick:i.fetchCards},{default:(0,s.k6)((()=>[(0,s.eW)("Применить")])),_:1},8,["onClick"]),(0,s.bF)(p,{modelValue:o.statusQuery,"onUpdate:modelValue":a[1]||(a[1]=e=>o.statusQuery=e),options:o.statusOptions,onChange:i.fetchCards},null,8,["modelValue","options","onChange"])]),o.errorMessage?((0,s.uX)(),(0,s.CE)("div",W,[(0,s.Lk)("p",x,(0,u.v_)(o.errorMessage),1)])):o.isCardsLoading?((0,s.uX)(),(0,s.Wv)(g,{key:2})):((0,s.uX)(),(0,s.Wv)(v,{key:1,cards:o.cards},null,8,["cards"])),o.errorMessage||o.isCardsLoading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(h,{key:3,page:o.page,totalPages:o.totalPages,onChangePage:i.changePage},null,8,["page","totalPages","onChangePage"]))])}function S(e,a,t,n,o,i){const d=(0,s.g2)("card-item");return(0,s.uX)(),(0,s.Wv)(r.F,{tag:"div",class:"card-list",name:"list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.cards,(e=>((0,s.uX)(),(0,s.Wv)(d,{key:e.id,card:e},null,8,["card"])))),128))])),_:1})}const K=["src","alt"],N={class:"card__text"},q={class:"card__title"},B={class:"card__status"},T={class:"card__subtitle"};function D(e,a,t,n,o,i){const d=(0,s.g2)("card-info"),c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.Wv)(r.eB,{name:"card",appear:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"card",to:`/card/${t.card.id}`},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.card.image,alt:t.card.name},null,8,K),(0,s.Lk)("div",N,[(0,s.Lk)("div",null,[(0,s.Lk)("h2",q,(0,u.v_)(t.card.name),1),(0,s.Lk)("div",B,[(0,s.Lk)("div",{class:(0,u.C4)(["status__icon",{status__icon__alive:"Alive"===t.card.status,status__icon__dead:"Dead"===t.card.status}])},null,2),(0,s.Lk)("div",T,(0,u.v_)(t.card.status)+" - "+(0,u.v_)(t.card.species),1)])]),(0,s.bF)(d,{isLocation:!0,card:t.card},null,8,["card"]),(0,s.bF)(d,{isLocation:!1,card:t.card},null,8,["card"])])])),_:1},8,["to"])])])),_:1})}const R=e=>((0,s.Qi)("data-v-26130c86"),e=e(),(0,s.jt)(),e),U={key:0,class:"info"},G=R((()=>(0,s.Lk)("div",{class:"info-title"},"Last known location:",-1))),z={class:"info-body"},H={key:1,class:"info"},J=R((()=>(0,s.Lk)("div",{class:"info-title"},"First seen in:",-1))),Y={class:"info-body"};function Z(e,a,t,r,n,o){return t.isLocation?((0,s.uX)(),(0,s.CE)("div",U,[G,(0,s.Lk)("div",z,(0,u.v_)(t.card.location.name),1)])):((0,s.uX)(),(0,s.CE)("div",H,[J,(0,s.Lk)("div",Y,(0,u.v_)(n.episodeName),1)]))}var ee=t(4373),ae={props:{card:{type:Object,required:!0},isLocation:{type:Boolean,required:!0}},data(){return{episodeName:""}},created(){this.fetchEpisodeName()},methods:{fetchEpisodeName(){ee.A.get(this.card.episode[0]).then((e=>{this.episodeName=e.data.name})).catch((e=>{console.error(e)}))}}};const te=(0,i.A)(ae,[["render",Z],["__scopeId","data-v-26130c86"]]);var re=te,se={components:{CardInfo:re},props:{card:{type:Object,required:!0}}};const ne=(0,i.A)(se,[["render",D],["__scopeId","data-v-688b6d56"]]);var oe=ne,ie={components:{CardItem:oe},props:{cards:{type:Array,required:!0}}};const de=(0,i.A)(ie,[["render",S],["__scopeId","data-v-7b6bc184"]]);var ce=de;const ue={class:"title"};function le(e,a,t,r,n,o){return(0,s.uX)(),(0,s.CE)("h1",ue,"Rick and Morty")}var pe={};const ve=(0,i.A)(pe,[["render",le],["__scopeId","data-v-0dd22a84"]]);var ge=ve;const he={class:"page__wrapper"},fe=["onClick"];function me(e,a,t,r,n,o){return(0,s.uX)(),(0,s.CE)("div",he,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.visiblePages,(e=>((0,s.uX)(),(0,s.CE)("div",{class:(0,u.C4)({page:"number"===typeof e,"current-page":t.page===e}),key:e,onClick:a=>"number"===typeof e?o.changePage(e):null},(0,u.v_)(e),11,fe)))),128))])}t(4114);var _e={props:["page","totalPages"],methods:{changePage(e){this.$emit("change-page",e)}},computed:{visiblePages(){const e=3,a=3,t=2,r="...";let s=[];for(let n=1;n<=this.totalPages;n++)n<=e||n>this.totalPages-e||n>=Math.floor(this.totalPages/2)&&n<Math.floor(this.totalPages/2)+a||n>=this.page-t&&n<=this.page+t?s.push(n):n!==e+1&&n!==Math.floor(this.totalPages/2)+a&&n!==this.page-t-1&&n!==this.page+t+1||s.push(r);return s=s.filter(((e,a,t)=>"number"===typeof e||"string"===typeof e&&"number"===typeof t[a+1])),s}}};const ye=(0,i.A)(_e,[["render",me],["__scopeId","data-v-2bb7ef54"]]);var ke=ye,be={name:"App",components:{CardList:ce,AppBanner:ge,AppPagination:ke},data(){return{cards:[],isCardsLoading:!1,searchQuery:"",statusQuery:"",page:1,totalPages:0,errorMessage:"",statusOptions:[{value:"",name:"Все"},{value:"alive",name:"Живой"},{value:"dead",name:"Мертвый"},{value:"unknown",name:"Неизвестно"}]}},methods:{changePage(e){this.page=e},async fetchCards(){try{this.isCardsLoading=!0;const e=await ee.A.get("https://rickandmortyapi.com/api/character",{params:{page:this.page,name:this.searchQuery,status:this.statusQuery}});this.totalPages=e.data.info.pages,this.cards=e.data.results,this.errorMessage=""}catch(e){e.response&&e.response.data&&e.response.data.error?this.errorMessage=e.response.data.error:this.errorMessage="Произошла неизвестная ошибка"}finally{this.isCardsLoading=!1}}},mounted(){this.fetchCards()},watch:{page(){this.fetchCards()}}};const Ce=(0,i.A)(be,[["render",$],["__scopeId","data-v-185a21e9"]]);var Le=Ce;const Ee={class:"page"},Xe={key:2};function Ae(e,a,t,r,n,o){const i=(0,s.g2)("card-description"),d=(0,s.g2)("my-loader");return(0,s.uX)(),(0,s.CE)("div",Ee,[!n.isCardLoading&&n.card?((0,s.uX)(),(0,s.Wv)(i,{key:n.card.id,card:n.card},null,8,["card"])):n.isCardLoading?((0,s.uX)(),(0,s.Wv)(d,{key:1})):n.errorMessage?((0,s.uX)(),(0,s.CE)("div",Xe,(0,u.v_)(n.errorMessage),1)):(0,s.Q3)("",!0)])}const Pe=e=>((0,s.Qi)("data-v-733a3b52"),e=e(),(0,s.jt)(),e),Me={class:"card"},Ie=["src","alt"],Oe={class:"card__text"},we={class:"card__title"},Fe={class:"card__status"},je={class:"card__subtitle"},Qe=Pe((()=>(0,s.Lk)("h3",{class:"card__title"},"Episode",-1))),Ve={key:0};function We(e,a,t,n,o,i){const d=(0,s.g2)("card-info"),c=(0,s.g2)("my-loader");return(0,s.uX)(),(0,s.Wv)(r.eB,{name:"card",appear:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Me,[(0,s.Lk)("img",{class:"card__image",src:t.card.image,alt:t.card.name},null,8,Ie),(0,s.Lk)("div",Oe,[(0,s.Lk)("div",null,[(0,s.Lk)("h2",we,(0,u.v_)(t.card.name),1),(0,s.Lk)("div",Fe,[(0,s.Lk)("div",{class:(0,u.C4)(["status__icon",{status__icon__alive:"Alive"===t.card.status,status__icon__dead:"Dead"===t.card.status}])},null,2),(0,s.Lk)("div",je,(0,u.v_)(t.card.status)+" - "+(0,u.v_)(t.card.species),1)])]),(0,s.bF)(d,{isLocation:!0,card:t.card},null,8,["card"]),Qe,o.isEpisodesLoading?((0,s.uX)(),(0,s.Wv)(c,{key:1})):((0,s.uX)(),(0,s.CE)("ul",Ve,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.episodes,(e=>((0,s.uX)(),(0,s.CE)("li",{class:"card__episode",key:e.id},(0,u.v_)(e.name),1)))),128))]))])])])),_:1})}var xe={components:{CardInfo:re,MyLoader:F},props:{card:{type:Object,required:!0}},data(){return{episodes:[],isEpisodesLoading:!1}},methods:{async fetchEpisodes(e){const a=e.map((e=>e.split("/").pop())).join(","),t=await ee.A.get(`https://rickandmortyapi.com/api/episode/${a}`);return t.data}},async mounted(){this.isEpisodesLoading=!0,this.episodes=await this.fetchEpisodes(this.card.episode),this.isEpisodesLoading=!1}};const $e=(0,i.A)(xe,[["render",We],["__scopeId","data-v-733a3b52"]]);var Se=$e,Ke={components:{CardDescription:Se,MyLoader:F},data(){return{card:null,isCardLoading:!1,errorMessage:""}},methods:{async fetchCard(e){try{this.isCardLoading=!0;const a=await ee.A.get(`https://rickandmortyapi.com/api/character/${e}`);this.card=a.data,this.errorMessage=""}catch(a){a.response&&a.response.data&&a.response.data.error?this.errorMessage=a.response.data.error:this.errorMessage="Произошла неизвестная ошибка"}finally{this.isCardLoading=!1}}},async mounted(){const e=this.$route.params.id;this.fetchCard(e),document.body.style.backgroundColor="rgb(39, 43, 51)"},beforeUnmount(){document.body.style.backgroundColor=null}};const Ne=(0,i.A)(Ke,[["render",Ae],["__scopeId","data-v-02eacad3"]]);var qe=Ne;const Be=[{path:"/",component:Le},{path:"/card/:id",component:qe}],Te=(0,Q.aE)({history:(0,Q.LA)("/rick-and-morty/"),routes:Be});var De=Te;const Re=(0,r.Ef)(c);j.forEach((e=>{Re.component(e.name,e)})),Re.use(De).mount("#app")}},a={};function t(r){var s=a[r];if(void 0!==s)return s.exports;var n=a[r]={exports:{}};return e[r].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(a,r,s,n){if(!r){var o=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],n=e[u][2];for(var i=!0,d=0;d<r.length;d++)(!1&n||o>=n)&&Object.keys(t.O).every((function(e){return t.O[e](r[d])}))?r.splice(d--,1):(i=!1,n<o&&(o=n));if(i){e.splice(u--,1);var c=s();void 0!==c&&(a=c)}}return a}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,s,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,r){var s,n,o=r[0],i=r[1],d=r[2],c=0;if(o.some((function(a){return 0!==e[a]}))){for(s in i)t.o(i,s)&&(t.m[s]=i[s]);if(d)var u=d(t)}for(a&&a(r);c<o.length;c++)n=o[c],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(u)},r=self["webpackChunkrick_and_morty"]=self["webpackChunkrick_and_morty"]||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))}();var r=t.O(void 0,[504],(function(){return t(6024)}));r=t.O(r)})();
//# sourceMappingURL=app.5df229b5.js.map