(function(){"use strict";var e={6120:function(e,t,a){var r=a(3751),n=a(375),s=a(33);const o={class:"search"},c={key:0,class:"error-message"},i={class:"error-text"};function d(e,t,a,d,u,l){const p=(0,n.g2)("app-banner"),f=(0,n.g2)("my-input"),v=(0,n.g2)("my-button"),g=(0,n.g2)("my-select"),h=(0,n.g2)("card-list"),m=(0,n.g2)("my-loader"),y=(0,n.g2)("app-pagination");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(p),(0,n.Lk)("div",o,[(0,n.bF)(f,{modelValue:u.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>u.searchQuery=e),placeholder:"Поиск по имени...",onKeyup:(0,r.jR)(l.fetchCards,["enter"])},null,8,["modelValue","onKeyup"]),(0,n.bF)(f,{modelValue:u.statusQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>u.statusQuery=e),placeholder:"Поиск по статусу...",onKeyup:(0,r.jR)(l.fetchCards,["enter"])},null,8,["modelValue","onKeyup"]),(0,n.bF)(v,{onClick:l.fetchCards},{default:(0,n.k6)((()=>[(0,n.eW)("Применить")])),_:1},8,["onClick"]),(0,n.bF)(g,{modelValue:u.selectedSort,"onUpdate:modelValue":t[2]||(t[2]=e=>u.selectedSort=e),options:u.sortOptions},null,8,["modelValue","options"])]),u.errorMessage?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("p",i,(0,s.v_)(u.errorMessage),1)])):u.isCardsLoading?((0,n.uX)(),(0,n.Wv)(m,{key:2})):((0,n.uX)(),(0,n.Wv)(h,{key:1,cards:l.sortedCards},null,8,["cards"])),u.errorMessage||u.isCardsLoading?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(y,{key:3,page:u.page,totalPages:u.totalPages,onChangePage:l.changePage},null,8,["page","totalPages","onChangePage"]))])}function u(e,t,a,s,o,c){const i=(0,n.g2)("card-item");return(0,n.uX)(),(0,n.Wv)(r.F,{tag:"div",class:"card-list",name:"list"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.cards,(e=>((0,n.uX)(),(0,n.Wv)(i,{key:e.id,card:e},null,8,["card"])))),128))])),_:1})}const l={class:"card"},p=["src","alt"],f={class:"card__text"},v={class:"card__title"},g={class:"card__status"},h={class:"card__subtitle"};function m(e,t,a,o,c,i){const d=(0,n.g2)("card-info");return(0,n.uX)(),(0,n.Wv)(r.eB,{name:"card",appear:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",l,[(0,n.Lk)("img",{src:a.card.image,alt:a.card.name},null,8,p),(0,n.Lk)("div",f,[(0,n.Lk)("div",null,[(0,n.Lk)("h2",v,(0,s.v_)(a.card.name),1),(0,n.Lk)("div",g,[(0,n.Lk)("div",{class:(0,s.C4)(["status__icon",{status__icon__alive:"Alive"===a.card.status,status__icon__dead:"Dead"===a.card.status}])},null,2),(0,n.Lk)("div",h,(0,s.v_)(a.card.status)+" - "+(0,s.v_)(a.card.species),1)])]),(0,n.bF)(d,{isLocation:!0,card:a.card},null,8,["card"]),(0,n.bF)(d,{isLocation:!1,card:a.card},null,8,["card"])])])])),_:1})}const y=e=>((0,n.Qi)("data-v-c244f5f4"),e=e(),(0,n.jt)(),e),b={key:0,class:"info"},_=y((()=>(0,n.Lk)("div",{class:"info-title"},"Last known location:",-1))),C={class:"info-body"},k={key:1,class:"info"},L=y((()=>(0,n.Lk)("div",{class:"info-title"},"First seen in:",-1))),P={class:"info-body"};function X(e,t,a,r,o,c){return a.isLocation?((0,n.uX)(),(0,n.CE)("div",b,[_,(0,n.Lk)("div",C,(0,s.v_)(a.card.location.name),1)])):((0,n.uX)(),(0,n.CE)("div",k,[L,(0,n.Lk)("div",P,(0,s.v_)(o.episodeName),1)]))}var E=a(4335),O={props:{card:{type:Object,required:!0},isLocation:{type:Boolean,required:!0}},data(){return{episodeName:""}},created(){this.fetchEpisodeName()},methods:{fetchEpisodeName(){E.A.get(this.card.episode[0]).then((e=>{this.episodeName=e.data.name})).catch((e=>{console.error(e)}))}}},A=a(4621);const I=(0,A.A)(O,[["render",X],["__scopeId","data-v-c244f5f4"]]);var V=I,j={components:{CardInfo:V},props:{card:{type:Object,required:!0}}};const F=(0,A.A)(j,[["render",m],["__scopeId","data-v-e34c28da"]]);var M=F,w={components:{CardItem:M},props:{cards:{type:Array,required:!0}}};const S=(0,A.A)(w,[["render",u],["__scopeId","data-v-7b6bc184"]]);var Q=S;const x={class:"title"};function K(e,t,a,r,s,o){return(0,n.uX)(),(0,n.CE)("h1",x,"Rick and Morty")}var W={};const N=(0,A.A)(W,[["render",K],["__scopeId","data-v-06f519f9"]]);var q=N;const R={class:"page__wrapper"},T=["onClick"];function $(e,t,a,r,o,c){return(0,n.uX)(),(0,n.CE)("div",R,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.visiblePages,(e=>((0,n.uX)(),(0,n.CE)("div",{class:(0,s.C4)({page:"number"===typeof e,"current-page":a.page===e}),key:e,onClick:t=>"number"===typeof e?c.changePage(e):null},(0,s.v_)(e),11,T)))),128))])}a(4114);var B={props:["page","totalPages"],methods:{changePage(e){this.$emit("change-page",e)}},computed:{visiblePages(){const e=3,t=3,a=2,r="...";let n=[];for(let s=1;s<=this.totalPages;s++)s<=e||s>this.totalPages-e||s>=Math.floor(this.totalPages/2)&&s<Math.floor(this.totalPages/2)+t||s>=this.page-a&&s<=this.page+a?n.push(s):s!==e+1&&s!==Math.floor(this.totalPages/2)+t&&s!==this.page-a-1&&s!==this.page+a+1||n.push(r);return n=n.filter(((e,t,a)=>"number"===typeof e||"string"===typeof e&&"number"===typeof a[t+1])),n}}};const U=(0,A.A)(B,[["render",$],["__scopeId","data-v-2bb7ef54"]]);var D=U,G={name:"App",components:{CardList:Q,AppBanner:q,AppPagination:D},data(){return{cards:[],isCardsLoading:!1,selectedSort:"",searchQuery:"",statusQuery:"",page:1,totalPages:0,errorMessage:"",sortOptions:[{value:"name",name:"По имени"},{value:"status",name:"По статусу"}]}},methods:{changePage(e){this.page=e},async fetchCards(){try{this.isCardsLoading=!0;const e=await E.A.get("https://rickandmortyapi.com/api/character",{params:{page:this.page,name:this.searchQuery,status:this.statusQuery}});this.totalPages=e.data.info.pages,this.cards=e.data.results,this.errorMessage=""}catch(e){e.response&&e.response.data&&e.response.data.error?this.errorMessage=e.response.data.error:this.errorMessage="Произошла неизвестная ошибка"}finally{this.isCardsLoading=!1}}},mounted(){this.fetchCards()},computed:{sortedCards(){return[...this.cards].sort(((e,t)=>e[this.selectedSort]?.localeCompare(t[this.selectedSort])))}},watch:{page(){this.fetchCards()}}};const z=(0,A.A)(G,[["render",d]]);var H=z;const J=["v-model"],Y=(0,n.Lk)("option",{disabled:"",value:""},"Сортировка",-1),Z=["value"];function ee(e,t,a,r,o,c){return(0,n.uX)(),(0,n.CE)("select",{class:"select","v-model":a.modelValue,onChange:t[0]||(t[0]=(...e)=>c.cangeOption&&c.cangeOption(...e))},[Y,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.options,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.value,value:e.value},(0,s.v_)(e.name),9,Z)))),128))],40,J)}var te={name:"my-select",props:{modelValue:{type:String},options:{type:Array,default:()=>[]}},methods:{cangeOption(e){this.$emit("update:modelValue",e.target.value)}}};const ae=(0,A.A)(te,[["render",ee]]);var re=ae;const ne=["value"];function se(e,t,a,r,s,o){return(0,n.uX)(),(0,n.CE)("input",{value:a.modelValue,onInput:t[0]||(t[0]=(...e)=>o.updateInput&&o.updateInput(...e)),class:"input",type:"text"},null,40,ne)}var oe={name:"my-input",props:{modelValue:[String,Number]},methods:{updateInput(e){this.$emit("update:modelValue",e.target.value)}}};const ce=(0,A.A)(oe,[["render",se],["__scopeId","data-v-97baff56"]]);var ie=ce;const de={class:"btn"};function ue(e,t,a,r,s,o){return(0,n.uX)(),(0,n.CE)("button",de,[(0,n.RG)(e.$slots,"default")])}var le={name:"my-button"};const pe=(0,A.A)(le,[["render",ue]]);var fe=pe;const ve={class:"spinner"};function ge(e,t,a,r,s,o){return(0,n.uX)(),(0,n.CE)("div",ve)}var he={name:"my-loader"};const me=(0,A.A)(he,[["render",ge],["__scopeId","data-v-bb0bdcf8"]]);var ye=me,be=[re,ie,fe,ye];const _e=(0,r.Ef)(H);be.forEach((e=>{_e.component(e.name,e)})),_e.mount("#app")}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,s){if(!r){var o=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],s=e[u][2];for(var c=!0,i=0;i<r.length;i++)(!1&s||o>=s)&&Object.keys(a.O).every((function(e){return a.O[e](r[i])}))?r.splice(i--,1):(c=!1,s<o&&(o=s));if(c){e.splice(u--,1);var d=n();void 0!==d&&(t=d)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,n,s]}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,s,o=r[0],c=r[1],i=r[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(n in c)a.o(c,n)&&(a.m[n]=c[n]);if(i)var u=i(a)}for(t&&t(r);d<o.length;d++)s=o[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(u)},r=self["webpackChunkrick_and_morty"]=self["webpackChunkrick_and_morty"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(6120)}));r=a.O(r)})();
//# sourceMappingURL=app.84369e7f.js.map